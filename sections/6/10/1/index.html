<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>6.10.1 Conditional inclusion &mdash; C99 Language Standard  documentation</title>
      <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/brand.css" type="text/css" />
    <link rel="shortcut icon" href="../../../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/sphinx_highlight.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="6.10.2 Source file inclusion" href="../2/index.html" />
    <link rel="prev" title="6.10 Preprocessing directives" href="../index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html" class="icon icon-home">
            C99 Language Standard
              <img src="../../../../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../foreword.html">Foreword</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../1/index.html">1. Scope</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../2/index.html">2. Normative references</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../3/index.html">3. Terms, definitions, and symbols</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../4/index.html">4. Conformance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../5/index.html">5. Environment</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">6. Language</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../1/index.html">6.1 Notation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../2/index.html">6.2 Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../3/index.html">6.3 Conversions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../4/index.html">6.4 Lexical elements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../5/index.html">6.5 Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../6/index.html">6.6 Constant expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../7/index.html">6.7 Declarations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../8/index.html">6.8 Statements and blocks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../9/index.html">6.9 External definitions</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">6.10 Preprocessing directives</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">6.10.1 Conditional inclusion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../2/index.html">6.10.2 Source file inclusion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../3/index.html">6.10.3 Macro replacement</a></li>
<li class="toctree-l3"><a class="reference internal" href="../4/index.html">6.10.4 Line control</a></li>
<li class="toctree-l3"><a class="reference internal" href="../5/index.html">6.10.5 Error directive</a></li>
<li class="toctree-l3"><a class="reference internal" href="../6/index.html">6.10.6 Pragma directive</a></li>
<li class="toctree-l3"><a class="reference internal" href="../7/index.html">6.10.7 Null directive</a></li>
<li class="toctree-l3"><a class="reference internal" href="../8/index.html">6.10.8 Predefined macro names</a></li>
<li class="toctree-l3"><a class="reference internal" href="../9/index.html">6.10.9 Pragma operator</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../11/index.html">6.11 Future language directions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../7/index.html">7. Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../8/index.html">Annex A</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../9/index.html">Annex B</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../10/index.html">Annex C</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../11/index.html">Annex D</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../12/index.html">Annex E</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../13/index.html">Annex F</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../14/index.html">Annex G</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../15/index.html">Annex H</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../16/index.html">Annex I</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../17/index.html">Annex J</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../18/index.html">Bibliography</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">C99 Language Standard</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">6. Language</a></li>
          <li class="breadcrumb-item"><a href="../index.html">6.10 Preprocessing directives</a></li>
      <li class="breadcrumb-item active">6.10.1 Conditional inclusion</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="../index.html" class="btn btn-neutral float-left" title="6.10 Preprocessing directives" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../2/index.html" class="btn btn-neutral float-right" title="6.10.2 Source file inclusion" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="conditional-inclusion">
<span id="id1"></span><h1>6.10.1 Conditional inclusion<a class="headerlink" href="#conditional-inclusion" title="Permalink to this heading"></a></h1>
<p class="rubric">Constraints</p>
<div class="snum docutils container" id="p1">
<p><a class="reference internal" href="#p1"><span class="std std-ref">1</span></a></p>
</div>
<p>The expression that controls conditional inclusion shall be an integer constant expression except that: it shall not contain a cast; identifiers (including those lexically identical to keywords) are interpreted as described below;<a class="footnote-reference brackets" href="#note144" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a> and it may contain unary operator expressions of the form</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>defined identifier
</pre></div>
</div>
<p>or</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>defined ( identifier )
</pre></div>
</div>
<p>which evaluate to 1 if the identifier is currently defined as a macro name (that is, if it is predefined or if it has been the subject of a <span class="c-texpr sig sig-inline highlight c">#define</span> preprocessing directive without an intervening <span class="c-texpr sig sig-inline highlight c">#undef</span> directive with the same subject identifier), 0 if it is not.</p>
<div class="snum docutils container" id="p2">
<p><a class="reference internal" href="#p2"><span class="std std-ref">2</span></a></p>
</div>
<p>Each preprocessing token that remains (in the list of preprocessing tokens that will become the controlling expression) after all macro replacements have occurred shall be in the lexical form of a token (<a class="reference internal" href="../../4/index.html#id1"><span class="std std-ref">6.4</span></a>).</p>
<p class="rubric">Semantics</p>
<div class="snum docutils container" id="p3">
<p><a class="reference internal" href="#p3"><span class="std std-ref">3</span></a></p>
</div>
<p>Preprocessing directives of the forms</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># if   constant-expression new-line groupopt
# elif constant-expression new-line groupopt
</pre></div>
</div>
<p>check whether the controlling constant expression evaluates to nonzero.</p>
<div class="snum docutils container" id="p4">
<p><a class="reference internal" href="#p4"><span class="std std-ref">4</span></a></p>
</div>
<p>Prior to evaluation, macro invocations in the list of preprocessing tokens that will become the controlling constant expression are replaced (except for those macro names modified by the defined unary operator), just as in normal text. If the token defined is generated as a result of this replacement process or use of the defined unary operator does not match one of the two specified forms prior to macro replacement, the behavior is undefined. After all replacements due to macro expansion and the defined unary operator have been performed, all remaining identifiers (including those lexically identical to keywords) are replaced with the pp-number 0, and then each preprocessing token is converted into a token. The resulting tokens compose the controlling constant expression which is evaluated according to the rules of <a class="reference internal" href="../../6/index.html#id1"><span class="std std-ref">6.6</span></a>. For the purposes of this token conversion and evaluation, all signed integer types and all unsigned integer types act as if they have the same representation as, respectively, the types intmax_t and uintmax_t defined in the header <a class="reference internal" href="../../../7/18/index.html#id1"><span class="std std-ref">&lt;stdint.h&gt;</span></a>.<a class="footnote-reference brackets" href="#note145" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a> This includes interpreting character constants, which may involve converting escape sequences into execution character set members. Whether the numeric value for these character constants matches the value obtained when an identical character constant occurs in an expression (other than within a <span class="c-texpr sig sig-inline highlight c">#if</span> or <span class="c-texpr sig sig-inline highlight c">#elif</span> directive) is implementation-defined.<a class="footnote-reference brackets" href="#note146" id="id4" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a> Also, whether a single-character character constant may have a negative value is implementation-defined.</p>
<div class="snum docutils container" id="p5">
<p><a class="reference internal" href="#p5"><span class="std std-ref">5</span></a></p>
</div>
<p>Preprocessing directives of the forms</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># ifdef identifier new-line groupopt
# ifndef identifier new-line groupopt
</pre></div>
</div>
<p>check whether the identifier is or is not currently defined as a macro name. Their conditions are equivalent to <span class="c-texpr sig sig-inline highlight c">#if</span> defined identifier and <span class="c-texpr sig sig-inline highlight c">#if</span> !defined identifier respectively.</p>
<div class="snum docutils container" id="p6">
<p><a class="reference internal" href="#p6"><span class="std std-ref">6</span></a></p>
</div>
<p>Each directive’s condition is checked in order. If it evaluates to false (zero), the group that it controls is skipped: directives are processed only through the name that determines the directive in order to keep track of the level of nested conditionals; the rest of the directives’ preprocessing tokens are ignored, as are the other preprocessing tokens in the group. Only the first group whose control condition evaluates to true (nonzero) is processed. If none of the conditions evaluates to true, and there is a <span class="c-texpr sig sig-inline highlight c">#else</span> directive, the group controlled by the <span class="c-texpr sig sig-inline highlight c">#else</span> is processed; lacking a <span class="c-texpr sig sig-inline highlight c">#else</span> directive, all the groups until the <span class="c-texpr sig sig-inline highlight c">#endif</span> are skipped.<a class="footnote-reference brackets" href="#note147" id="id5" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a></p>
<p class="rubric">Forward References</p>
<table class="hlist"><tr><td><ul class="simple">
<li><p><a class="reference internal" href="../3/index.html#id1"><span class="std std-ref">6.10.3 Macro replacement</span></a></p></li>
<li><p><a class="reference internal" href="../2/index.html#id1"><span class="std std-ref">6.10.2 Source file inclusion</span></a></p></li>
</ul>
</td><td><ul class="simple">
<li><p><a class="reference internal" href="../../../7/18/1/5/index.html#id1"><span class="std std-ref">7.18.1.5 Greatest-width integer types</span></a></p></li>
</ul>
</td></tr></table>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#if &#39;z&#39; - &#39;a&#39; == 25</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="sc">&#39;z&#39;</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="sc">&#39;a&#39;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">25</span><span class="p">)</span>
</pre></div>
</div>
<p class="rubric">Footnotes</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="note144" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">1</a><span class="fn-bracket">]</span></span>
<p>Because the controlling constant expression is evaluated during translation phase 4, all identifiers either are or are not macro names – there simply are no keywords, enumeration constants, etc.</p>
</aside>
<aside class="footnote brackets" id="note145" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">2</a><span class="fn-bracket">]</span></span>
<p>Thus, on an implementation where INT_MAX is 0x7FFF and UINT_MAX is 0xFFFF, the constant 0x8000 is signed and positive within a <span class="c-texpr sig sig-inline highlight c">#if</span> expression even though it would be unsigned in translation phase 7.</p>
</aside>
<aside class="footnote brackets" id="note146" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id4">3</a><span class="fn-bracket">]</span></span>
<p>Thus, the constant expression in the following <span class="c-texpr sig sig-inline highlight c">#if</span> directive and if statement is not guaranteed to evaluate to the same value in these two contexts.</p>
</aside>
<aside class="footnote brackets" id="note147" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id5">4</a><span class="fn-bracket">]</span></span>
<p>As indicated by the syntax, a preprocessing token shall not follow a <span class="c-texpr sig sig-inline highlight c">#else</span> or <span class="c-texpr sig sig-inline highlight c">#endif</span> directive before the terminating new-line character. However, comments may appear anywhere in a source file, including within a preprocessing directive.</p>
</aside>
</aside>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../index.html" class="btn btn-neutral float-left" title="6.10 Preprocessing directives" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../2/index.html" class="btn btn-neutral float-right" title="6.10.2 Source file inclusion" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>